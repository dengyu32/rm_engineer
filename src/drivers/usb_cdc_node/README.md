### usb_cdc_node
> 基于 USB CDC 的轻量级 ROS2 通信节点，用于稳定的虚拟串口数据交换。
**简介**
- 对 libusb 做简洁封装，提供可靠的数据收发能力。
- 适用于上位机与下位机之间的高速通信与协议交互。

#### 项目目标
> 该节点的设计目标与边界。
**目标清单**
- 提供可复用的 USB CDC 通信节点。
- 在 ROS2 中作为上位机通信模块。
- 封装 libusb，简化调用并增强工程性。
- 支持线程管理、数据缓冲、协议解析与消息发布的扩展。

#### 适用场景
> 典型应用与落地场景。
**场景清单**
- 工业机器人上位机通信。
- 自研设备的 USB 虚拟串口数据交互。
- 传感器/执行器 USB CDC 接口接入。
- ROS2 上位机控制系统（C++）。

#### 使用libusb库

1) libusb_init / libusb_exit 是什么

- libusb_init(&ctx_) 相当于“创建一个 libusb 的运行环境对象（context）”，里面包含线程、事件循环、内存缓
存等资源。
- libusb_exit(ctx_) 相当于“销毁这个运行环境对象并释放资源”。

2) 现在的代码做了什么

- 每次 open() 都执行 libusb_init(&ctx_)。
- 但代码里没有任何地方调用 libusb_exit(ctx_)。
- 这意味着：如果设备断开→重连→再次 open()，就会重复创建新的 context，而旧的 context 没被释放。

3) 为什么会有风险

- 每次 libusb_init 都会分配资源（内存、文件描述符、事件处理结构）。
- 不 libusb_exit 就不会释放。
- 反复重连，资源会越来越多，最终可能导致内存膨胀或系统资源耗尽。

4) “重连不初始化会不会出事？”

- 不会。libusb_context 只是库的运行环境，初始化一次就可以重复用来打开/关闭设备。
- 重连的关键是重新 libusb_open_device_with_vid_pid，而不是重新 libusb_init。

5) 正确的生命周期

- 初始化一次（通常在构造函数或第一次 open 时）
- 多次打开/关闭设备句柄（重连）
- 程序退出时再 libusb_exit（析构函数或显式 close）

